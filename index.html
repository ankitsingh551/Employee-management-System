

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar-transition { transition: transform 0.3s ease-in-out; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card-hover { transition: transform 0.2s, box-shadow 0.2s; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 to-purple-700">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md">
            <div class="text-center mb-8">
                <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-users text-blue-600 text-2xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Employee Management</h1>
                <p class="text-gray-600">Sign in to your account</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="loginEmail" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your email" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="loginPassword" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your password" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                    <select id="loginRole" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="admin">Admin</option>
                        <option value="hr">HR Manager</option>
                        <option value="employee">Employee</option>
                    </select>
                </div>
                
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200 font-medium">
                    Sign In
                </button>
            </form>
            
            <div class="mt-6 text-center text-sm text-gray-600">
                <p>Demo Credentials:</p>
                <p><strong>Admin:</strong> admin@company.com / admin123</p>
                <p><strong>HR:</strong> hr@company.com / hr123</p>
                <p><strong>Employee:</strong> emp@company.com / emp123</p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Sidebar -->
        <div id="sidebar" class="fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-30 sidebar-transition">
            <div class="p-6 border-b">
                <div class="flex items-center space-x-3">
                    <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center">
                        <i class="fas fa-users text-blue-600"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-gray-800">EMS</h2>
                        <p class="text-sm text-gray-600" id="userRole">Admin</p>
                    </div>
                </div>
            </div>
            
            <nav class="p-4">
                <ul class="space-y-2">
                    <li><a href="#" onclick="showSection('dashboard')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-chart-dashboard w-5"></i><span>Dashboard</span></a></li>
                    <li><a href="#" onclick="showSection('employees')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-users w-5"></i><span>Employees</span></a></li>
                    <li><a href="#" onclick="showSection('attendance')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-clock w-5"></i><span>Attendance</span></a></li>
                    <li><a href="#" onclick="showSection('leaves')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-calendar-alt w-5"></i><span>Leave Management</span></a></li>
                    <li><a href="#" onclick="showSection('payroll')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-dollar-sign w-5"></i><span>Payroll</span></a></li>
                    <li><a href="#" onclick="showSection('departments')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-building w-5"></i><span>Departments</span></a></li>
                    <li><a href="#" onclick="showSection('reports')" class="nav-link flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-50 text-gray-700 hover:text-blue-600 transition duration-200">
                        <i class="fas fa-chart-bar w-5"></i><span>Reports</span></a></li>
                </ul>
            </nav>
            
            <div class="absolute bottom-4 left-4 right-4">
                <button onclick="logout()" class="w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-red-50 text-gray-700 hover:text-red-600 transition duration-200">
                    <i class="fas fa-sign-out-alt w-5"></i><span>Logout</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="ml-64 min-h-screen">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800" id="pageTitle">Dashboard</h1>
                        <p class="text-gray-600" id="pageSubtitle">Welcome back!</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <i class="fas fa-bell text-gray-400 text-xl cursor-pointer hover:text-gray-600"></i>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">3</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="bg-blue-100 w-8 h-8 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-blue-600"></i>
                            </div>
                            <span class="text-gray-700 font-medium" id="userName">John Admin</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Section -->
            <div id="dashboardSection" class="p-6 fade-in">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Employees</p>
                                <p class="text-3xl font-bold text-gray-800">247</p>
                                <p class="text-green-600 text-sm">â†‘ 12% from last month</p>
                            </div>
                            <div class="bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-users text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Present Today</p>
                                <p class="text-3xl font-bold text-gray-800">234</p>
                                <p class="text-green-600 text-sm">94.7% attendance</p>
                            </div>
                            <div class="bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-check text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">On Leave</p>
                                <p class="text-3xl font-bold text-gray-800">13</p>
                                <p class="text-orange-600 text-sm">5.3% of workforce</p>
                            </div>
                            <div class="bg-orange-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-calendar-alt text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Monthly Payroll</p>
                                <p class="text-3xl font-bold text-gray-800">$1.2M</p>
                                <p class="text-blue-600 text-sm">â†‘ 8% from last month</p>
                            </div>
                            <div class="bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-dollar-sign text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Attendance Trend</h3>
                        <canvas id="attendanceChart" width="400" height="200"></canvas>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Department Distribution</h3>
                        <canvas id="departmentChart" width="400" height="200"></canvas>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Activities</h3>
                    <div class="space-y-4">
                        <div class="flex items-center space-x-4 p-3 hover:bg-gray-50 rounded-lg">
                            <div class="bg-green-100 w-10 h-10 rounded-full flex items-center justify-center">
                                <i class="fas fa-user-plus text-green-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">New employee Sarah Johnson joined</p>
                                <p class="text-sm text-gray-600">Marketing Department â€¢ 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4 p-3 hover:bg-gray-50 rounded-lg">
                            <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center">
                                <i class="fas fa-calendar text-blue-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">Leave request approved for Mike Chen</p>
                                <p class="text-sm text-gray-600">Engineering Department â€¢ 4 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4 p-3 hover:bg-gray-50 rounded-lg">
                            <div class="bg-purple-100 w-10 h-10 rounded-full flex items-center justify-center">
                                <i class="fas fa-dollar-sign text-purple-600"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">Payroll processed for March 2024</p>
                                <p class="text-sm text-gray-600">HR Department â€¢ 1 day ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Employees Section -->
            <div id="employeesSection" class="p-6 fade-in hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Employee Management</h2>
                        <p class="text-gray-600">Manage your workforce efficiently</p>
                    </div>
                    <button onclick="openEmployeeModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-plus mr-2"></i>Add Employee
                    </button>
                </div>

                <!-- Search and Filter -->
                <div class="bg-white p-4 rounded-xl shadow-sm mb-6">
                    <div class="flex flex-col md:flex-row gap-4">
                        <div class="flex-1">
                            <input type="text" id="employeeSearch" placeholder="Search employees..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <select id="departmentFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">All Departments</option>
                            <option value="Engineering">Engineering</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Sales">Sales</option>
                            <option value="HR">HR</option>
                        </select>
                        <select id="statusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">All Status</option>
                            <option value="Active">Active</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                    </div>
                </div>

                <!-- Employee Table -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Employee</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Position</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Salary</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="employeeTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Employee rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Attendance Section -->
            <div id="attendanceSection" class="p-6 fade-in hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Attendance Management</h2>
                        <p class="text-gray-600">Track and manage employee attendance</p>
                    </div>
                    <button onclick="markAttendance()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">
                        <i class="fas fa-check mr-2"></i>Mark Attendance
                    </button>
                </div>

                <!-- Attendance Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Today's Attendance</p>
                                <p class="text-2xl font-bold text-gray-800">94.7%</p>
                            </div>
                            <div class="bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-check text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Late Arrivals</p>
                                <p class="text-2xl font-bold text-gray-800">8</p>
                            </div>
                            <div class="bg-orange-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-clock text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Absent</p>
                                <p class="text-2xl font-bold text-gray-800">13</p>
                            </div>
                            <div class="bg-red-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-times text-red-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attendance Table -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                    <div class="p-4 border-b">
                        <div class="flex flex-col md:flex-row gap-4">
                            <input type="date" id="attendanceDate" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <select id="attendanceDepartment" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">All Departments</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Sales">Sales</option>
                                <option value="HR">HR</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Employee</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Check In</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Check Out</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hours</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="attendanceTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Attendance rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Leave Management Section -->
            <div id="leavesSection" class="p-6 fade-in hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Leave Management</h2>
                        <p class="text-gray-600">Manage employee leave requests</p>
                    </div>
                    <button onclick="openLeaveModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-plus mr-2"></i>Request Leave
                    </button>
                </div>

                <!-- Leave Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="text-center">
                            <p class="text-gray-600 text-sm">Pending Requests</p>
                            <p class="text-3xl font-bold text-orange-600">12</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="text-center">
                            <p class="text-gray-600 text-sm">Approved</p>
                            <p class="text-3xl font-bold text-green-600">45</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="text-center">
                            <p class="text-gray-600 text-sm">Rejected</p>
                            <p class="text-3xl font-bold text-red-600">3</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="text-center">
                            <p class="text-gray-600 text-sm">On Leave Today</p>
                            <p class="text-3xl font-bold text-blue-600">13</p>
                        </div>
                    </div>
                </div>

                <!-- Leave Requests Table -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                    <div class="p-4 border-b">
                        <div class="flex flex-col md:flex-row gap-4">
                            <select id="leaveStatusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">All Status</option>
                                <option value="Pending">Pending</option>
                                <option value="Approved">Approved</option>
                                <option value="Rejected">Rejected</option>
                            </select>
                            <select id="leaveTypeFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">All Types</option>
                                <option value="Annual">Annual Leave</option>
                                <option value="Sick">Sick Leave</option>
                                <option value="Personal">Personal Leave</option>
                                <option value="Emergency">Emergency Leave</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Employee</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Leave Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Start Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">End Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Days</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="leaveTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Leave rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Payroll Section -->
            <div id="payrollSection" class="p-6 fade-in hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Payroll Management</h2>
                        <p class="text-gray-600">Manage employee salaries and payroll</p>
                    </div>
                    <button onclick="processPayroll()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">
                        <i class="fas fa-calculator mr-2"></i>Process Payroll
                    </button>
                </div>

                <!-- Payroll Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Monthly Payroll</p>
                                <p class="text-2xl font-bold text-gray-800">$1,247,500</p>
                            </div>
                            <div class="bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Average Salary</p>
                                <p class="text-2xl font-bold text-gray-800">$5,050</p>
                            </div>
                            <div class="bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-chart-line text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Processed This Month</p>
                                <p class="text-2xl font-bold text-gray-800">247</p>
                            </div>
                            <div class="bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-check-circle text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payroll Table -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                    <div class="p-4 border-b">
                        <div class="flex flex-col md:flex-row gap-4">
                            <select id="payrollMonth" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="2024-03">March 2024</option>
                                <option value="2024-02">February 2024</option>
                                <option value="2024-01">January 2024</option>
                            </select>
                            <select id="payrollDepartment" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">All Departments</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Sales">Sales</option>
                                <option value="HR">HR</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Employee</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Base Salary</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Overtime</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deductions</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Net Pay</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="payrollTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Payroll rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Departments Section -->
            <div id="departmentsSection" class="p-6 fade-in hidden">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Department Management</h2>
                        <p class="text-gray-600">Organize and manage company departments</p>
                    </div>
                    <button onclick="openDepartmentModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-plus mr-2"></i>Add Department
                    </button>
                </div>

                <!-- Department Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="departmentCards">
                    <!-- Department cards will be populated by JavaScript -->
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reportsSection" class="p-6 fade-in hidden">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Reports & Analytics</h2>
                    <p class="text-gray-600">Generate comprehensive workforce reports</p>
                </div>

                <!-- Report Types -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover cursor-pointer" onclick="generateReport('attendance')">
                        <div class="flex items-center space-x-4">
                            <div class="bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-clock text-blue-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Attendance Report</h3>
                                <p class="text-sm text-gray-600">Monthly attendance analysis</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover cursor-pointer" onclick="generateReport('payroll')">
                        <div class="flex items-center space-x-4">
                            <div class="bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Payroll Report</h3>
                                <p class="text-sm text-gray-600">Salary and compensation analysis</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover cursor-pointer" onclick="generateReport('leave')">
                        <div class="flex items-center space-x-4">
                            <div class="bg-orange-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-calendar-alt text-orange-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Leave Report</h3>
                                <p class="text-sm text-gray-600">Leave patterns and trends</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover cursor-pointer" onclick="generateReport('performance')">
                        <div class="flex items-center space-x-4">
                            <div class="bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-chart-line text-purple-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Performance Report</h3>
                                <p class="text-sm text-gray-600">Employee performance metrics</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover cursor-pointer" onclick="generateReport('demographic')">
                        <div class="flex items-center space-x-4">
                            <div class="bg-red-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-users text-red-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Demographic Report</h3>
                                <p class="text-sm text-gray-600">Workforce demographics</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm card-hover cursor-pointer" onclick="generateReport('custom')">
                        <div class="flex items-center space-x-4">
                            <div class="bg-gray-100 w-12 h-12 rounded-lg flex items-center justify-center">
                                <i class="fas fa-cog text-gray-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">Custom Report</h3>
                                <p class="text-sm text-gray-600">Build your own report</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Report Display Area -->
                <div id="reportDisplay" class="bg-white rounded-xl shadow-sm p-6 hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-800" id="reportTitle">Report Results</h3>
                        <button onclick="exportReport()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-download mr-2"></i>Export
                        </button>
                    </div>
                    <div id="reportContent">
                        <!-- Report content will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Employee Modal -->
    <div id="employeeModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-screen overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold text-gray-800" id="employeeModalTitle">Add New Employee</h3>
                    <button onclick="closeEmployeeModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <form id="employeeForm" class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                        <input type="text" id="empFirstName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                        <input type="text" id="empLastName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="empEmail" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                        <input type="tel" id="empPhone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Department</label>
                        <select id="empDepartment" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select Department</option>
                            <option value="Engineering">Engineering</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Sales">Sales</option>
                            <option value="HR">HR</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Position</label>
                        <input type="text" id="empPosition" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Salary</label>
                        <input type="number" id="empSalary" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                        <input type="date" id="empStartDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" onclick="closeEmployeeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition duration-200">Cancel</button>
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Save Employee</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Leave Modal -->
    <div id="leaveModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold text-gray-800">Request Leave</h3>
                    <button onclick="closeLeaveModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <form id="leaveForm" class="p-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Employee</label>
                        <select id="leaveEmployee" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select Employee</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Leave Type</label>
                        <select id="leaveType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select Leave Type</option>
                            <option value="Annual">Annual Leave</option>
                            <option value="Sick">Sick Leave</option>
                            <option value="Personal">Personal Leave</option>
                            <option value="Emergency">Emergency Leave</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                            <input type="date" id="leaveStartDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                            <input type="date" id="leaveEndDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Reason</label>
                        <textarea id="leaveReason" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter reason for leave" required></textarea>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" onclick="closeLeaveModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition duration-200">Cancel</button>
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Submit Request</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Department Modal -->
    <div id="departmentModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold text-gray-800">Add Department</h3>
                    <button onclick="closeDepartmentModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <form id="departmentForm" class="p-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Department Name</label>
                        <input type="text" id="deptName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Manager</label>
                        <input type="text" id="deptManager" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="deptDescription" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter department description"></textarea>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" onclick="closeDepartmentModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition duration-200">Cancel</button>
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Add Department</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let currentSection = 'dashboard';
        let employees = [
            { id: 1, firstName: 'John', lastName: 'Doe', email: 'john.doe@company.com', phone: '+1-555-0101', department: 'Engineering', position: 'Senior Developer', salary: 75000, startDate: '2022-01-15', status: 'Active' },
            { id: 2, firstName: 'Jane', lastName: 'Smith', email: 'jane.smith@company.com', phone: '+1-555-0102', department: 'Marketing', position: 'Marketing Manager', salary: 65000, startDate: '2021-03-20', status: 'Active' },
            { id: 3, firstName: 'Mike', lastName: 'Johnson', email: 'mike.johnson@company.com', phone: '+1-555-0103', department: 'Sales', position: 'Sales Representative', salary: 50000, startDate: '2023-06-10', status: 'Active' },
            { id: 4, firstName: 'Sarah', lastName: 'Wilson', email: 'sarah.wilson@company.com', phone: '+1-555-0104', department: 'HR', position: 'HR Specialist', salary: 55000, startDate: '2022-09-05', status: 'Active' },
            { id: 5, firstName: 'David', lastName: 'Brown', email: 'david.brown@company.com', phone: '+1-555-0105', department: 'Engineering', position: 'Frontend Developer', salary: 70000, startDate: '2023-01-12', status: 'Active' }
        ];

        let attendance = [
            { id: 1, employeeId: 1, date: '2024-03-15', checkIn: '09:00', checkOut: '17:30', hours: 8.5, status: 'Present' },
            { id: 2, employeeId: 2, date: '2024-03-15', checkIn: '08:45', checkOut: '17:15', hours: 8.5, status: 'Present' },
            { id: 3, employeeId: 3, date: '2024-03-15', checkIn: '09:15', checkOut: '17:45', hours: 8.5, status: 'Late' },
            { id: 4, employeeId: 4, date: '2024-03-15', checkIn: '', checkOut: '', hours: 0, status: 'Absent' },
            { id: 5, employeeId: 5, date: '2024-03-15', checkIn: '09:00', checkOut: '17:00', hours: 8, status: 'Present' }
        ];

        let leaves = [
            { id: 1, employeeId: 1, type: 'Annual', startDate: '2024-03-20', endDate: '2024-03-22', days: 3, reason: 'Family vacation', status: 'Approved' },
            { id: 2, employeeId: 2, type: 'Sick', startDate: '2024-03-18', endDate: '2024-03-18', days: 1, reason: 'Medical appointment', status: 'Pending' },
            { id: 3, employeeId: 3, type: 'Personal', startDate: '2024-03-25', endDate: '2024-03-26', days: 2, reason: 'Personal matters', status: 'Approved' }
        ];

        let departments = [
            { id: 1, name: 'Engineering', manager: 'John Doe', employees: 45, description: 'Software development and technical operations' },
            { id: 2, name: 'Marketing', manager: 'Jane Smith', employees: 23, description: 'Brand promotion and customer engagement' },
            { id: 3, name: 'Sales', manager: 'Mike Johnson', employees: 31, description: 'Revenue generation and client relations' },
            { id: 4, name: 'HR', manager: 'Sarah Wilson', employees: 12, description: 'Human resources and employee relations' }
        ];

        // Authentication
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const role = document.getElementById('loginRole').value;

            // Simple demo authentication
            if ((email === 'admin@company.com' && password === 'admin123' && role === 'admin') ||
                (email === 'hr@company.com' && password === 'hr123' && role === 'hr') ||
                (email === 'emp@company.com' && password === 'emp123' && role === 'employee')) {
                
                currentUser = { email, role };
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                document.getElementById('userRole').textContent = role.charAt(0).toUpperCase() + role.slice(1);
                document.getElementById('userName').textContent = role === 'admin' ? 'John Admin' : role === 'hr' ? 'Jane HR' : 'Mike Employee';
                
                initializeApp();
                showSection('dashboard');
            } else {
                alert('Invalid credentials. Please check the demo credentials provided.');
            }
        });

        function logout() {
            currentUser = null;
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }

        // Navigation
        function showSection(section) {
            // Hide all sections
            const sections = ['dashboard', 'employees', 'attendance', 'leaves', 'payroll', 'departments', 'reports'];
            sections.forEach(s => {
                document.getElementById(s + 'Section').classList.add('hidden');
            });

            // Show selected section
            document.getElementById(section + 'Section').classList.remove('hidden');
            currentSection = section;

            // Update page title
            const titles = {
                dashboard: 'Dashboard',
                employees: 'Employee Management',
                attendance: 'Attendance Management',
                leaves: 'Leave Management',
                payroll: 'Payroll Management',
                departments: 'Department Management',
                reports: 'Reports & Analytics'
            };
            document.getElementById('pageTitle').textContent = titles[section];

            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('bg-blue-50', 'text-blue-600');
                link.classList.add('text-gray-700');
            });
            event.target.classList.add('bg-blue-50', 'text-blue-600');
            event.target.classList.remove('text-gray-700');

            // Load section data
            switch(section) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'employees':
                    loadEmployees();
                    break;
                case 'attendance':
                    loadAttendance();
                    break;
                case 'leaves':
                    loadLeaves();
                    break;
                case 'payroll':
                    loadPayroll();
                    break;
                case 'departments':
                    loadDepartments();
                    break;
                case 'reports':
                    loadReports();
                    break;
            }
        }

        // Initialize application
        function initializeApp() {
            // Set current date for attendance
            document.getElementById('attendanceDate').value = new Date().toISOString().split('T')[0];
            
            // Initialize charts
            setTimeout(() => {
                initializeCharts();
            }, 100);
        }

        // Dashboard functions
        function loadDashboard() {
            // Dashboard is already loaded with static content
            setTimeout(() => {
                initializeCharts();
            }, 100);
        }

        function initializeCharts() {
            // Attendance Chart
            const attendanceCtx = document.getElementById('attendanceChart');
            if (attendanceCtx) {
                new Chart(attendanceCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Attendance %',
                            data: [95, 92, 96, 94, 97, 89, 85],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            // Department Chart
            const departmentCtx = document.getElementById('departmentChart');
            if (departmentCtx) {
                new Chart(departmentCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Engineering', 'Marketing', 'Sales', 'HR'],
                        datasets: [{
                            data: [45, 23, 31, 12],
                            backgroundColor: [
                                'rgb(59, 130, 246)',
                                'rgb(16, 185, 129)',
                                'rgb(245, 158, 11)',
                                'rgb(239, 68, 68)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        // Employee functions
        function loadEmployees() {
            const tbody = document.getElementById('employeeTableBody');
            tbody.innerHTML = '';

            employees.forEach(emp => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                <span class="text-blue-600 font-medium">${emp.firstName[0]}${emp.lastName[0]}</span>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${emp.firstName} ${emp.lastName}</div>
                                <div class="text-sm text-gray-500">${emp.email}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${emp.department}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${emp.position}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$${emp.salary.toLocaleString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${emp.status === 'Active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${emp.status}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="editEmployee(${emp.id})" class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                        <button onclick="deleteEmployee(${emp.id})" class="text-red-600 hover:text-red-900">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            // Populate employee dropdown in leave modal
            const leaveEmployeeSelect = document.getElementById('leaveEmployee');
            leaveEmployeeSelect.innerHTML = '<option value="">Select Employee</option>';
            employees.forEach(emp => {
                const option = document.createElement('option');
                option.value = emp.id;
                option.textContent = `${emp.firstName} ${emp.lastName}`;
                leaveEmployeeSelect.appendChild(option);
            });
        }

        function openEmployeeModal(employeeId = null) {
            const modal = document.getElementById('employeeModal');
            const title = document.getElementById('employeeModalTitle');
            const form = document.getElementById('employeeForm');

            if (employeeId) {
                const employee = employees.find(emp => emp.id === employeeId);
                title.textContent = 'Edit Employee';
                document.getElementById('empFirstName').value = employee.firstName;
                document.getElementById('empLastName').value = employee.lastName;
                document.getElementById('empEmail').value = employee.email;
                document.getElementById('empPhone').value = employee.phone;
                document.getElementById('empDepartment').value = employee.department;
                document.getElementById('empPosition').value = employee.position;
                document.getElementById('empSalary').value = employee.salary;
                document.getElementById('empStartDate').value = employee.startDate;
                form.dataset.employeeId = employeeId;
            } else {
                title.textContent = 'Add New Employee';
                form.reset();
                delete form.dataset.employeeId;
            }

            modal.classList.remove('hidden');
        }

        function closeEmployeeModal() {
            document.getElementById('employeeModal').classList.add('hidden');
        }

        function editEmployee(id) {
            openEmployeeModal(id);
        }

        function deleteEmployee(id) {
            if (confirm('Are you sure you want to delete this employee?')) {
                employees = employees.filter(emp => emp.id !== id);
                loadEmployees();
            }
        }

        document.getElementById('employeeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                firstName: document.getElementById('empFirstName').value,
                lastName: document.getElementById('empLastName').value,
                email: document.getElementById('empEmail').value,
                phone: document.getElementById('empPhone').value,
                department: document.getElementById('empDepartment').value,
                position: document.getElementById('empPosition').value,
                salary: parseInt(document.getElementById('empSalary').value),
                startDate: document.getElementById('empStartDate').value,
                status: 'Active'
            };

            if (this.dataset.employeeId) {
                // Edit existing employee
                const id = parseInt(this.dataset.employeeId);
                const index = employees.findIndex(emp => emp.id === id);
                employees[index] = { ...employees[index], ...formData };
            } else {
                // Add new employee
                const newId = Math.max(...employees.map(emp => emp.id)) + 1;
                employees.push({ id: newId, ...formData });
            }

            closeEmployeeModal();
            loadEmployees();
        });

        // Attendance functions
        function loadAttendance() {
            const tbody = document.getElementById('attendanceTableBody');
            tbody.innerHTML = '';

            attendance.forEach(att => {
                const employee = employees.find(emp => emp.id === att.employeeId);
                if (!employee) return;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                <span class="text-blue-600 font-medium">${employee.firstName[0]}${employee.lastName[0]}</span>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${employee.firstName} ${employee.lastName}</div>
                                <div class="text-sm text-gray-500">${employee.department}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${att.checkIn || '-'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${att.checkOut || '-'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${att.hours}h</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${
                            att.status === 'Present' ? 'bg-green-100 text-green-800' :
                            att.status === 'Late' ? 'bg-orange-100 text-orange-800' :
                            'bg-red-100 text-red-800'
                        }">${att.status}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="editAttendance(${att.id})" class="text-blue-600 hover:text-blue-900">Edit</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function markAttendance() {
            alert('Attendance marked successfully! This would typically integrate with a time tracking system.');
        }

        function editAttendance(id) {
            alert('Edit attendance functionality would open a modal to modify attendance records.');
        }

        // Leave functions
        function loadLeaves() {
            const tbody = document.getElementById('leaveTableBody');
            tbody.innerHTML = '';

            leaves.forEach(leave => {
                const employee = employees.find(emp => emp.id === leave.employeeId);
                if (!employee) return;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                <span class="text-blue-600 font-medium">${employee.firstName[0]}${employee.lastName[0]}</span>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${employee.firstName} ${employee.lastName}</div>
                                <div class="text-sm text-gray-500">${employee.department}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${leave.type}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${leave.startDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${leave.endDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${leave.days}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${
                            leave.status === 'Approved' ? 'bg-green-100 text-green-800' :
                            leave.status === 'Pending' ? 'bg-orange-100 text-orange-800' :
                            'bg-red-100 text-red-800'
                        }">${leave.status}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        ${leave.status === 'Pending' ? `
                            <button onclick="approveLeave(${leave.id})" class="text-green-600 hover:text-green-900 mr-2">Approve</button>
                            <button onclick="rejectLeave(${leave.id})" class="text-red-600 hover:text-red-900">Reject</button>
                        ` : `
                            <button onclick="viewLeave(${leave.id})" class="text-blue-600 hover:text-blue-900">View</button>
                        `}
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function openLeaveModal() {
            document.getElementById('leaveModal').classList.remove('hidden');
        }

        function closeLeaveModal() {
            document.getElementById('leaveModal').classList.add('hidden');
        }

        function approveLeave(id) {
            const leave = leaves.find(l => l.id === id);
            if (leave) {
                leave.status = 'Approved';
                loadLeaves();
            }
        }

        function rejectLeave(id) {
            const leave = leaves.find(l => l.id === id);
            if (leave) {
                leave.status = 'Rejected';
                loadLeaves();
            }
        }

        function viewLeave(id) {
            const leave = leaves.find(l => l.id === id);
            const employee = employees.find(emp => emp.id === leave.employeeId);
            alert(`Leave Details:\nEmployee: ${employee.firstName} ${employee.lastName}\nType: ${leave.type}\nDates: ${leave.startDate} to ${leave.endDate}\nReason: ${leave.reason}\nStatus: ${leave.status}`);
        }

        document.getElementById('leaveForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newLeave = {
                id: Math.max(...leaves.map(l => l.id)) + 1,
                employeeId: parseInt(document.getElementById('leaveEmployee').value),
                type: document.getElementById('leaveType').value,
                startDate: document.getElementById('leaveStartDate').value,
                endDate: document.getElementById('leaveEndDate').value,
                days: Math.ceil((new Date(document.getElementById('leaveEndDate').value) - new Date(document.getElementById('leaveStartDate').value)) / (1000 * 60 * 60 * 24)) + 1,
                reason: document.getElementById('leaveReason').value,
                status: 'Pending'
            };

            leaves.push(newLeave);
            closeLeaveModal();
            loadLeaves();
            this.reset();
        });

        // Payroll functions
        function loadPayroll() {
            const tbody = document.getElementById('payrollTableBody');
            tbody.innerHTML = '';

            employees.forEach(emp => {
                const overtime = Math.floor(Math.random() * 500);
                const deductions = Math.floor(emp.salary * 0.15);
                const netPay = emp.salary + overtime - deductions;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                <span class="text-blue-600 font-medium">${emp.firstName[0]}${emp.lastName[0]}</span>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${emp.firstName} ${emp.lastName}</div>
                                <div class="text-sm text-gray-500">${emp.department}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$${emp.salary.toLocaleString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$${overtime.toLocaleString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$${deductions.toLocaleString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">$${netPay.toLocaleString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800">Processed</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="viewPayslip(${emp.id})" class="text-blue-600 hover:text-blue-900">View Payslip</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function processPayroll() {
            alert('Payroll processing initiated! This would calculate salaries, deductions, and generate payslips for all employees.');
        }

        function viewPayslip(id) {
            const employee = employees.find(emp => emp.id === id);
            alert(`Payslip for ${employee.firstName} ${employee.lastName} would be displayed here with detailed breakdown of salary, deductions, and net pay.`);
        }

        // Department functions
        function loadDepartments() {
            const container = document.getElementById('departmentCards');
            container.innerHTML = '';

            departments.forEach(dept => {
                const card = document.createElement('div');
                card.className = 'bg-white p-6 rounded-xl shadow-sm card-hover';
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <div class="bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center">
                            <i class="fas fa-building text-blue-600 text-xl"></i>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="editDepartment(${dept.id})" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteDepartment(${dept.id})" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">${dept.name}</h3>
                    <p class="text-gray-600 text-sm mb-4">${dept.description}</p>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Manager:</span>
                            <span class="font-medium">${dept.manager}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Employees:</span>
                            <span class="font-medium">${dept.employees}</span>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function openDepartmentModal() {
            document.getElementById('departmentModal').classList.remove('hidden');
        }

        function closeDepartmentModal() {
            document.getElementById('departmentModal').classList.add('hidden');
        }

        function editDepartment(id) {
            alert('Edit department functionality would open a modal to modify department details.');
        }

        function deleteDepartment(id) {
            if (confirm('Are you sure you want to delete this department?')) {
                departments = departments.filter(dept => dept.id !== id);
                loadDepartments();
            }
        }

        document.getElementById('departmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newDepartment = {
                id: Math.max(...departments.map(d => d.id)) + 1,
                name: document.getElementById('deptName').value,
                manager: document.getElementById('deptManager').value,
                description: document.getElementById('deptDescription').value,
                employees: 0
            };

            departments.push(newDepartment);
            closeDepartmentModal();
            loadDepartments();
            this.reset();
        });

        // Reports functions
        function loadReports() {
            // Reports section is already loaded with static content
        }

        function generateReport(type) {
            const reportDisplay = document.getElementById('reportDisplay');
            const reportTitle = document.getElementById('reportTitle');
            const reportContent = document.getElementById('reportContent');

            reportTitle.textContent = `${type.charAt(0).toUpperCase() + type.slice(1)} Report`;
            
            let content = '';
            switch(type) {
                case 'attendance':
                    content = `
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-green-800">Average Attendance</h4>
                                <p class="text-2xl font-bold text-green-600">94.7%</p>
                            </div>
                            <div class="bg-orange-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-orange-800">Late Arrivals</h4>
                                <p class="text-2xl font-bold text-orange-600">3.2%</p>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-red-800">Absenteeism</h4>
                                <p class="text-2xl font-bold text-red-600">2.1%</p>
                            </div>
                        </div>
                        <p class="text-gray-600">Detailed attendance analysis for the current month showing trends and patterns.</p>
                    `;
                    break;
                case 'payroll':
                    content = `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-800">Total Payroll</h4>
                                <p class="text-2xl font-bold text-blue-600">$1,247,500</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-green-800">Average Salary</h4>
                                <p class="text-2xl font-bold text-green-600">$5,050</p>
                            </div>
                        </div>
                        <p class="text-gray-600">Comprehensive payroll analysis including salary distributions and cost breakdowns.</p>
                    `;
                    break;
                case 'leave':
                    content = `
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-orange-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-orange-800">Pending</h4>
                                <p class="text-2xl font-bold text-orange-600">12</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-green-800">Approved</h4>
                                <p class="text-2xl font-bold text-green-600">45</p>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-red-800">Rejected</h4>
                                <p class="text-2xl font-bold text-red-600">3</p>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-800">On Leave</h4>
                                <p class="text-2xl font-bold text-blue-600">13</p>
                            </div>
                        </div>
                        <p class="text-gray-600">Leave management statistics and trends analysis.</p>
                    `;
                    break;
                default:
                    content = `<p class="text-gray-600">Report data would be displayed here with charts, tables, and detailed analytics.</p>`;
            }

            reportContent.innerHTML = content;
            reportDisplay.classList.remove('hidden');
        }

        function exportReport() {
            alert('Report exported successfully! This would generate a PDF or Excel file with the report data.');
        }

        // Search and filter functions
        document.getElementById('employeeSearch')?.addEventListener('input', function() {
            // Filter employees based on search
            filterEmployees();
        });

        document.getElementById('departmentFilter')?.addEventListener('change', function() {
            filterEmployees();
        });

        document.getElementById('statusFilter')?.addEventListener('change', function() {
            filterEmployees();
        });

        function filterEmployees() {
            const search = document.getElementById('employeeSearch').value.toLowerCase();
            const deptFilter = document.getElementById('departmentFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            const filteredEmployees = employees.filter(emp => {
                const matchesSearch = emp.firstName.toLowerCase().includes(search) || 
                                    emp.lastName.toLowerCase().includes(search) || 
                                    emp.email.toLowerCase().includes(search);
                const matchesDept = !deptFilter || emp.department === deptFilter;
                const matchesStatus = !statusFilter || emp.status === statusFilter;

                return matchesSearch && matchesDept && matchesStatus;
            });

            // Update table with filtered results
            const tbody = document.getElementById('employeeTableBody');
            tbody.innerHTML = '';

            filteredEmployees.forEach(emp => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center mr-3">
                                <span class="text-blue-600 font-medium">${emp.firstName[0]}${emp.lastName[0]}</span>
                            </div>
                            <div>
                                <div class="text-sm font-medium text-gray-900">${emp.firstName} ${emp.lastName}</div>
                                <div class="text-sm text-gray-500">${emp.email}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${emp.department}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${emp.position}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$${emp.salary.toLocaleString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${emp.status === 'Active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${emp.status}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="editEmployee(${emp.id})" class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                        <button onclick="deleteEmployee(${emp.id})" class="text-red-600 hover:text-red-900">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Initialize the application when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            if (document.getElementById('attendanceDate')) {
                document.getElementById('attendanceDate').value = today;
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'979d07d4f31e2dfe',t:'MTc1Njk4NDEyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
